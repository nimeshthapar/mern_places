{"version":3,"sources":["shared/store/auth-context.js","shared/components/Navigation/Navlinks.module.css","shared/components/Navigation/MainNavigation.module.css","shared/components/LoadingSpinner/LoadingSpinner.js","shared/components/Backdrop/Backdrop.js","shared/components/Navigation/MainHeader.module.css","shared/components/Navigation/SideDrawer.module.css","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["logOutTimer","AuthContext","createContext","isLoggedIn","token","userId","login","uid","expirationTime","logout","AuthProvider","props","useState","setToken","tokenExpTime","setTokenExpTime","setUserId","useCallback","tokenExpirationTime","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedUserData","parse","getItem","Provider","value","children","module","exports","LoadingSpinner","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","MainHeader","classes","NavLinks","authCtx","useContext","to","activeClassName","active","exact","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","MainNavigation","drawerOpen","setDrawerOpen","closeDrawerHandler","Users","lazy","NewPlaces","UpdatePlace","UserPlaces","Auth","App","routes","path","fallback","render"],"mappings":"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","file":"static/js/main.64e3d94e.chunk.js","sourcesContent":["import React, { createContext, useCallback, useState, useEffect } from 'react';\r\n\r\nconst AuthContext = createContext({\r\n  isLoggedIn: false,\r\n  token: null,\r\n  userId: null,\r\n  login: (uid, token, expirationTime) => {},\r\n  logout: () => {},\r\n});\r\n\r\nlet logOutTimer;\r\nexport const AuthProvider = (props) => {\r\n  const [token, setToken] = useState(false);\r\n  const [tokenExpTime, setTokenExpTime] = useState();\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  const login = useCallback((uid, token, expirationTime) => {\r\n    setToken(token);\r\n    setUserId(uid);\r\n    const tokenExpirationTime =\r\n      expirationTime || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n\r\n    setTokenExpTime(tokenExpirationTime);\r\n\r\n    localStorage.setItem(\r\n      'userData',\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token,\r\n        expiration: tokenExpirationTime.toISOString(),\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setUserId(null);\r\n    setTokenExpTime(null);\r\n    localStorage.removeItem('userData');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpTime) {\r\n      const remainingTime = tokenExpTime.getTime() - new Date().getTime();\r\n      logOutTimer = setTimeout(logout, remainingTime);\r\n    } else {\r\n      clearTimeout(logOutTimer);\r\n    }\r\n  }, [token, logout, tokenExpTime]);\r\n\r\n  useEffect(() => {\r\n    const storedUserData = JSON.parse(localStorage.getItem('userData'));\r\n    if (\r\n      storedUserData &&\r\n      storedUserData.token &&\r\n      new Date(storedUserData.expiration) > new Date()\r\n    ) {\r\n      login(\r\n        storedUserData.userId,\r\n        storedUserData.token,\r\n        new Date(storedUserData.expiration)\r\n      );\r\n    }\r\n  }, [login]);\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{ isLoggedIn: !!token, token, userId, login, logout }}\r\n    >\r\n      {props.children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport default AuthContext;\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav-links\":\"Navlinks_nav-links__2IhyF\",\"active\":\"Navlinks_active__KyjgE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-navigation__menu-btn\":\"MainNavigation_main-navigation__menu-btn__dMr1U\",\"main-navigation__title\":\"MainNavigation_main-navigation__title__9ZIvP\",\"main-navigation__header-nav\":\"MainNavigation_main-navigation__header-nav__3pxIB\",\"main-navigation__drawer-nav\":\"MainNavigation_main-navigation__drawer-nav__3ArJQ\"};","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = (props) => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-root')\n  );\n};\n\nexport default Backdrop;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main-header\":\"MainHeader_main-header__1hqsA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"side-drawer\":\"SideDrawer_side-drawer__3Mktk\"};","import React from 'react';\r\n\r\nimport classes from './MainHeader.module.css';\r\n\r\nconst MainHeader = (props) => {\r\n  return <header className={classes['main-header']}>{props.children}</header>;\r\n};\r\n\r\nexport default MainHeader;\r\n","import React, { useContext } from 'react';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\nimport AuthContext from '../../store/auth-context';\r\nimport classes from './Navlinks.module.css';\r\n\r\nconst NavLinks = (props) => {\r\n  const authCtx = useContext(AuthContext);\r\n  return (\r\n    <ul className={classes['nav-links']}>\r\n      <li>\r\n        <NavLink to=\"/\" activeClassName={classes.active} exact>\r\n          All Users\r\n        </NavLink>\r\n      </li>\r\n      {authCtx.isLoggedIn && (\r\n        <li>\r\n          <NavLink\r\n            to={`/${authCtx.userId}/places`}\r\n            activeClassName={classes.active}\r\n            exact\r\n          >\r\n            My Places\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {authCtx.isLoggedIn && (\r\n        <li>\r\n          <NavLink to=\"/places/new\" activeClassName={classes.active} exact>\r\n            Add Place\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {!authCtx.isLoggedIn && (\r\n        <li>\r\n          <NavLink to=\"/auth\" activeClassName={classes.active} exact>\r\n            Login\r\n          </NavLink>\r\n        </li>\r\n      )}\r\n      {authCtx.isLoggedIn && (\r\n        <li>\r\n          <button onClick={authCtx.logout}>Logout</button>\r\n        </li>\r\n      )}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default NavLinks;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport classes from './SideDrawer.module.css';\r\n\r\nconst SideDrawer = (props) => {\r\n  const content = (\r\n    <CSSTransition\r\n      in={props.show}\r\n      timeout={200}\r\n      classNames={'slide-in-left'}\r\n      mountOnEnter\r\n      unmountOnExit\r\n    >\r\n      <aside className={classes['side-drawer']} onClick={props.onClick}>\r\n        {props.children}\r\n      </aside>\r\n    </CSSTransition>\r\n  );\r\n\r\n  return ReactDOM.createPortal(\r\n    content,\r\n    document.getElementById('overlays-root')\r\n  );\r\n};\r\n\r\nexport default SideDrawer;\r\n","import React, { Fragment, useState } from 'react';\r\n\r\nimport { Link } from 'react-router-dom';\r\nimport MainHeader from './MainHeader';\r\nimport classes from './MainNavigation.module.css';\r\nimport NavLinks from './NavLinks';\r\nimport SideDrawer from './SideDrawer';\r\nimport Backdrop from '../Backdrop/Backdrop';\r\n\r\nconst MainNavigation = () => {\r\n  const [drawerOpen, setDrawerOpen] = useState(false);\r\n\r\n  const openDrawerHandler = () => {\r\n    setDrawerOpen(true);\r\n  };\r\n\r\n  const closeDrawerHandler = () => {\r\n    setDrawerOpen(false);\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {drawerOpen && <Backdrop onClick={closeDrawerHandler} />}\r\n\r\n      <SideDrawer show={drawerOpen} onClick={closeDrawerHandler}>\r\n        <nav className={classes['main-navigation__drawer-nav']}>\r\n          <NavLinks />\r\n        </nav>\r\n      </SideDrawer>\r\n\r\n      <MainHeader>\r\n        <button\r\n          className={classes['main-navigation__menu-btn']}\r\n          onClick={openDrawerHandler}\r\n        >\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </button>\r\n        <h1 className={classes['main-navigation__title']}>\r\n          <Link to=\"/\">MERN Places</Link>\r\n        </h1>\r\n        <nav className={classes['main-navigation__header-nav']}>\r\n          <NavLinks />\r\n        </nav>\r\n      </MainHeader>\r\n    </Fragment>\r\n  );\r\n};\r\n\r\nexport default MainNavigation;\r\n","import React, { Fragment, lazy, useContext, Suspense } from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\n\nimport LoadingSpinner from './shared/components/LoadingSpinner/LoadingSpinner';\nimport MainNavigation from './shared/components/Navigation/MainNavigation';\nimport AuthContext from './shared/store/auth-context';\n// import NewPlaces from './places/pages/NewPlaces';\n// import UpdatePlace from './places/pages/UpdatePlace';\n// import UserPlaces from './places/pages/UserPlaces';\n// import Auth from './users/pages/Auth';\n// import Users from './users/pages/Users';\n\nconst Users = lazy(() => import('./users/pages/Users'));\nconst NewPlaces = lazy(() => import('./places/pages/NewPlaces'));\nconst UpdatePlace = lazy(() => import('./places/pages/UpdatePlace'));\nconst UserPlaces = lazy(() => import('./places/pages/UserPlaces'));\nconst Auth = lazy(() => import('./users/pages/Auth'));\n\nfunction App() {\n  const authCtx = useContext(AuthContext);\n  let routes;\n\n  if (authCtx.isLoggedIn) {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <Users />\n        </Route>\n        <Route path=\"/places/new\">\n          <NewPlaces />\n        </Route>\n        <Route path=\"/places/:pid\">\n          <UpdatePlace />\n        </Route>\n        <Route path=\"/:uid/places\">\n          <UserPlaces />\n        </Route>\n        <Route path=\"/*\">\n          <Redirect to=\"/\" />\n        </Route>\n      </Switch>\n    );\n  } else {\n    routes = (\n      <Switch>\n        <Route path=\"/\" exact>\n          <Users />\n        </Route>\n        <Route path=\"/:uid/places\">\n          <UserPlaces />\n        </Route>\n        <Route path=\"/auth\">\n          <Auth />\n        </Route>\n        <Route path=\"/*\">\n          <Redirect to=\"/auth\" />\n        </Route>\n      </Switch>\n    );\n  }\n\n  return (\n    <Fragment>\n      <MainNavigation />\n      <main>\n        <Suspense\n          fallback={\n            <div className=\"center\">\n              <LoadingSpinner />\n            </div>\n          }\n        >\n          {routes}\n        </Suspense>\n      </main>\n    </Fragment>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport './index.css';\nimport App from './App';\nimport { AuthProvider } from './shared/store/auth-context';\n\nReactDOM.render(\n  <BrowserRouter>\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  </BrowserRouter>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}